---
import { default as strings } from "@/locales/en.json";
import Button from "@/components/Button.astro";
import SkillIcon from "@/components/SkillIcon.astro";
---

<section id="contact-me" class="contact-me">
  <article class="contact-me--section">
    <h2 class="contact-me--title">{strings.skills.title}</h2>
    <p set:html={strings.skills.technicalDescription} />
    <div class="contact-me--skills">
      <SkillIcon icon="mdi:react" text={strings.skills.skills.react} />
      <SkillIcon icon="mdi:react" text={strings.skills.skills.reactNative} />
      <SkillIcon icon="mdi:language-css3" text={strings.skills.skills.css} />
      <SkillIcon
        icon="mdi:language-typescript"
        text={strings.skills.skills.typescript}
      />
      <SkillIcon icon="mdi:language-html5" text={strings.skills.skills.html} />
      <SkillIcon icon="mdi:git" text={strings.skills.skills.gitGithub} />
      <SkillIcon icon="mdi:tailwind" text={strings.skills.skills.tailwind} />
      <SkillIcon
        icon="mdi:test-tube-empty"
        text={strings.skills.skills.jestVitest}
      />
    </div>
    <p set:html={strings.skills.softDescription} />
    <div class="contact-me--skills">
      <SkillIcon
        icon="mdi:account-voice"
        text={strings.skills.softSkills.english}
      />
      <SkillIcon
        icon="mdi:account-voice"
        text={strings.skills.softSkills.spanish}
      />
      <SkillIcon
        icon="mdi:search"
        text={strings.skills.softSkills.attentionToDetail}
      />
      <SkillIcon
        icon="mdi:people-group"
        text={strings.skills.softSkills.leadership}
      />
    </div>
  </article>
  <article class="contact-me--section">
    <h2 class="contact-me--title">{strings.contact.title}</h2>
    <p set:html={strings.contact.description} />
    <div class="contact-me--buttons">
      <Button
        onPress="https://www.linkedin.com/in/thebryanmartinez/"
        type="primary"
        text={strings.contact.buttons.linkedIn}
      />
      <Button
        onPress="mailto:bryanmartz972@gmail.com"
        type="secondary"
        text={strings.contact.buttons.email}
      />
    </div>
    <p set:html={strings.contact.githubDescription} />

    <div class="contact-me--buttons">
      <Button
        onPress="https://github.com/thebryanmartinez"
        type="secondary"
        text={strings.contact.githubButton}
      />
    </div>
  </article>

  <style>
    .contact-me {
      display: flex;
      align-items: start;
      justify-content: space-between;
      gap: 8rem;
      @media (max-width: 601px) {
        flex-direction: column;
        gap: 4rem;
      }
    }

    .contact-me--section {
      display: grid;
      place-items: center;
      flex: 1;
    }

    .contact-me--title {
      margin-bottom: 2rem;
    }

    .contact-me--buttons {
      margin: 2rem 0rem;
      display: flex;
      gap: 1rem;

      @media (max-width: 1100px) {
        flex-direction: column;
      }
    }

    .contact-me--skills {
      display: grid;
      width: 100%;
      margin-bottom: 2rem;
      grid-template-columns: repeat(4, 1fr);
      grid-auto-flow: row;

      @media (max-width: 768px) {
        grid-template-columns: repeat(3, 1fr);
      }

      @media (max-width: 450px) {
        grid-template-columns: repeat(2, 1fr);
      }
    }
  </style>
</section>

<script>
  import { showAnnotations } from "@/utils/roughNotation";
  import { annotate } from "rough-notation";

  document.addEventListener("DOMContentLoaded", () => {
    const contactMeSection = document.querySelector("#contact-me");
    const highlights = contactMeSection.querySelectorAll("#highlight");
    const nodes = Array.from(highlights);

    const keyTechnicalSkillsCircle = annotate(
      contactMeSection.querySelector("#circle"),
      {
        type: "circle",
        color: "var(--blue-pastel)",
      },
    );

    const keySoftSkillsCircle = annotate(
      contactMeSection.querySelector("#circleSoftSkill"),
      {
        type: "circle",
        color: "var(--yellow-pastel)",
      },
    );

    showAnnotations(nodes, "highlight", [
      keyTechnicalSkillsCircle,
      keySoftSkillsCircle,
    ]);
  });
</script>
